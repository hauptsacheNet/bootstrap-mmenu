// this file requires bootstrap variables to be present

.mmenu {
  background-color: @navbar-default-bg;

  // desktop
  @media (min-width: @grid-float-breakpoint) {
    &.collapse {
      display: block;
      visibility: visible;
    }
  }

  // mobile
  @media (max-width: @grid-float-breakpoint-max) {
    clear: both;
    position: relative;

    height: @navbar-collapse-max-height;
    overflow-x: hidden;
    overflow-y: auto;

    > .nav > li {
      float: none;
    }

    li.mmenu-dropdown {
      // ! this value is also used to detect breakpoint in mmenu.js
      position: static;
    }

    ul > li {
      border-bottom: 2px solid @dropdown-divider-bg;
    }
  }

  // one row mobile
  @media (max-width: @screen-xs-max) {
    .make-row();
  }
}

.mmenu-dropdown-menu {

  position: absolute;
  z-index: @zindex-dropdown;
  min-width: 100%;
  white-space: nowrap;

  .mmenu-dropdown-menu {
    top: 0;
    left: 100%;
  }

  &.nav-stacked > li {
    margin-top: 0;
  }

  // mobile
  @media (max-width: @grid-float-breakpoint-max) {
    height: @navbar-collapse-max-height;

    .transition(left .2s ease-in);
    left: 100%;
    top: 0;

    li.click-open > & {
      .transition(left .2s ease-out);
      left: 0;
    }
  }

  // desktop
  @media (min-width: @grid-float-breakpoint) {
    .transition(visibility 0s linear .15s);

    visibility: hidden;
    opacity: 0;
    :hover > & {
      .transition(opacity 0s linear .15s);
      visibility: visible;
      opacity: 1;
    }

    > .mmenu-back {
      display: none;
    }
  }

  // look

  @dropdown-level-darkening: 14%;

  .submenu-colors (@dropdown-color) {
    > a {
      color: contrast(@dropdown-color, @dropdown-link-color, @nav-pills-active-link-hover-color, 60%);
    }
    &:hover > a,
    &:focus > a,
    &.focus > a {
      background-color: darken(@dropdown-color, @dropdown-level-darkening);
    }
  }

  // level 1
  background-color: @dropdown-bg;
  > li {
    .submenu-colors(@dropdown-bg);
  }

  // back button

  > li.mmenu-back {
    > a {
      background-color: @dropdown-divider-bg;
      color: @link-color;
      &:hover,
      &:focus,
      &.focus {
        color: @nav-pills-active-link-hover-color;
      }
    }
  }
}

.mmenu-toggle {
  @media (min-width: @grid-float-breakpoint) {
    display: none;
  }
  @media (max-width: @grid-float-breakpoint-max) {
    border-color: @navbar-default-toggle-border-color;
    &:hover,
    &:focus {
      background-color: @navbar-default-toggle-hover-bg;
    }

    .icon-bar {
      background-color: @navbar-default-toggle-icon-bar-bg;
    }
  }
}